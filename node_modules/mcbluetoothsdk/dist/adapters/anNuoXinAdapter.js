"use strict";var utils=require("../utils/util.js"),buffer=new Array,isWrite=!1;function parseData(e){var r=utils.ab2hex(e.value);buffer.push(r);var i=buffer.join("");if(-1!=i.indexOf("080bb8")&&-1!=i.indexOf("070bbd")){var t=i.indexOf("080bb8"),s=i.substring(t+8,t+14),n=utils.hexToBytes(s),a={bloodMeasureHigh:n[0],bloodMeasureLow:n[1],checkHeartRate:n[2]};return buffer=new Array,a}}function anxSentOrder(e,r,i){console.log("向安诺心发送指令");var t=utils.hexStringToArrayBuffer("04b0a054");console.log(t),i.writeBLECharacteristicValue({deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:"0000FCA0-0000-1000-8000-00805F9B34FB",value:t,success:function(){isWrite||(isWrite=!0,r(e.deviceId,e.serviceId,"0000FCA1-0000-1000-8000-00805F9B34FB",e.isMultiConnect)),console.log("发送指令成功！！！")},fail:function(e){console.log("发送失败"+e.errMsg+"\n")}}),setTimeout(function(){isWrite||(isWrite=!0,console.log("发送指令成功！！！通过延时器触发回调"),r(e.deviceId,e.serviceId,"0000FCA1-0000-1000-8000-00805F9B34FB",e.isMultiConnect))},1e3)}module.exports={parseData:parseData,anxSentOrder:anxSentOrder};