"use strict";var utils=require("../utils/util.js"),array=[];function parseData(a){utils.ab2hex(a.value);var e=Array.prototype.slice.call(new Uint8Array(a.value)),r=(array=array.concat(e))[2];if(array.length-3==r){var s={TC:"",GLU:"",HDL:"",TG:"",LDL:"",NONHDL:"",TCHDL:"",LDHDLL:""};if(4==array[5]||14==array[5]){for(var t=array[12],l=0;l<t;l++){var o=array.slice(13+10*l,23+10*l);console.log("singleResult:",o);var L=255&o[2],c=255&o[3],D=(192&o[8])>>>6,u=(240&o[4])>>4,i=getResultValue(D,L,c,o[1],u);switch(o[1]){case 0:s.GLU=i,1.1===s.GLU&&(s.GLU="LO"),33.3===s.GLU&&(s.GLU="HI"),console.log("血糖:",s.GLU);break;case 1:case 2:break;case 3:s.TC=i,console.log("血脂TC:",s.TC);break;case 4:s.HDL=i,console.log("血脂HDL:",s.HDL);break;case 5:s.TG=i,console.log("血脂TG:",s.TG);break;case 6:s.LDL=i,console.log("血脂LDL:",s.LDL);break;case 7:s.NONHDL=i,console.log("血脂 NONHDL:",s.NONHDL);break;case 8:s.TCHDL=i,console.log("血脂 TC / HDL:",s.TCHDL);break;case 9:s.LDHDLL=i,console.log("血脂 LDL/HDLL:",s.LDHDLL)}}return array=[],s}}}function getFloatResultByDigit(a,e,r){var s=0;switch(r){case 0:return String.valueOf(Math.round((a<<8)+e));case 1:s=10;break;case 2:s=100;break;case 3:s=1e3;break;default:s=10}return Math.round((a<<8)+e)/s}function getResultValue(a,e,r,s,t){var l="";switch(a){case 0:6<=s&&s<=9&&(l="----");break;case 1:l=">"+getFloatResultByDigit(e,r,t);break;case 2:l="<"+getFloatResultByDigit(e,r,t);break;case 3:l=getFloatResultByDigit(e,r,t)}return l}module.exports={parseData:parseData};