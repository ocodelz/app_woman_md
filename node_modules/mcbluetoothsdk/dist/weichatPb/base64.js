"use strict";var base64=module.exports;base64.length=function(r){var e=r.length;if(!e)return 0;for(var a=0;1<--e%4&&"="===r.charAt(e);)++a;return Math.ceil(3*r.length)/4-a};for(var b64=new Array(64),s64=new Array(123),i=0;i<64;)s64[b64[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;base64.encode=function(r,e,a){for(var i,n=null,t=[],o=0,s=0;e<a;){var c=r[e++];switch(s){case 0:t[o++]=b64[c>>2],i=(3&c)<<4,s=1;break;case 1:t[o++]=b64[i|c>>4],i=(15&c)<<2,s=2;break;case 2:t[o++]=b64[i|c>>6],t[o++]=b64[63&c],s=0}8191<o&&((n=n||[]).push(String.fromCharCode.apply(String,t)),o=0)}return s&&(t[o++]=b64[i],t[o++]=61,1===s&&(t[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,t.slice(0,o))),n.join("")):String.fromCharCode.apply(String,t.slice(0,o))};var invalidEncoding="invalid encoding";base64.decode=function(r,e,a){for(var i,n=a,t=0,o=0;o<r.length;){var s=r.charCodeAt(o++);if(61===s&&1<t)break;if(void 0===(s=s64[s]))throw Error(invalidEncoding);switch(t){case 0:i=s,t=1;break;case 1:e[a++]=i<<2|(48&s)>>4,i=s,t=2;break;case 2:e[a++]=(15&i)<<4|(60&s)>>2,i=s,t=3;break;case 3:e[a++]=(3&i)<<6|s,t=0}}if(1===t)throw Error(invalidEncoding);return a-n},base64.test=function(r){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(r)};