"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},util=module.exports,roots=require("./roots");util.LongBits=require("./longBits"),util.Long=require("./long"),util.pool=require("./pool"),util.float=require("./float"),util.asPromise=require("./asPromise"),util.EventEmitter=require("./EventEmitter"),util.path=require("./path"),util.base64=require("./base64"),util.utf8=require("./utf8"),util.compareFieldsById=function(e,t){return e.id-t.id},util.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},util.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],o=e[r++];void 0!==o&&(t[n]=o)}return t},util.isString=function(e){return"string"==typeof e||e instanceof String};var safePropBackslashRe=/\\/g,safePropQuoteRe=/"/g;function deepCopy(e){if("object"!=(void 0===e?"undefined":_typeof(e)))return e;var t={};for(var r in e)t[r]=deepCopy(e[r]);return t}util.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},util.isObject=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))},util.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,util.oneOfGetter=function(e){for(var r={},t=0;t<e.length;++t)r[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===r[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},util.oneOfSetter=function(r){return function(e){for(var t=0;t<r.length;++t)r[t]!==e&&delete this[r[t]]}},util.merge=function(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e},util.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(util.decorateRoot.remove(e.$type),e.$type.name=t,util.decorateRoot.add(e.$type)),e.$type;Type=Type||require("./type");var r=new Type(t||e.name);return util.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r},util.emptyArray=Object.freeze?Object.freeze([]):[],util.emptyObject=Object.freeze?Object.freeze({}):{},util.longToHash=function(e){return e?util.LongBits.from(e).toHash():util.LongBits.zeroHash},util.copy=function(e){if("object"!=(void 0===e?"undefined":_typeof(e)))return e;var t={};for(var r in e)t[r]=e[r];return t},util.deepCopy=deepCopy,util.ProtocolError=function(e){function r(e,t){if(!(this instanceof r))return new r(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&merge(this,t)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return e}}),r.prototype.toString=function(){return this.name+": "+this.message},r},util.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},util.Buffer=null,util.newBuffer=function(e){return"number"==typeof e?new util.Array(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},util.stringToBytes=function(e){for(var t,r=[],n=e.length,o=0;o<n;o++)65536<=(t=e.charCodeAt(o))&&t<=1114111?(r.push(t>>18&7|240),r.push(t>>12&63|128),r.push(t>>6&63|128),r.push(63&t|128)):2048<=t&&t<=65535?(r.push(t>>12&15|224),r.push(t>>6&63|128),r.push(63&t|128)):128<=t&&t<=2047?(r.push(t>>6&31|192),r.push(63&t|128)):r.push(255&t);return r},util.byteToString=function(e){if("string"==typeof e)return e;for(var t="",r=e,n=0;n<r.length;n++){var o=r[n].toString(2),i=o.match(/^1+?(?=0)/);if(i&&8==o.length){for(var u=i[0].length,f=r[n].toString(2).slice(7-u),a=1;a<u;a++)f+=r[a+n].toString(2).slice(2);t+=String.fromCharCode(parseInt(f,2)),n+=u-1}else t+=String.fromCharCode(r[n])}return t},util.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Object.defineProperty(util,"decorateRoot",{get:function(){return roots.decorated||(roots.decorated=new(require("./root")))}});