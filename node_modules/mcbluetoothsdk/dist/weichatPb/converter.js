"use strict";var Enum,util,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},converter=module.exports;function valuePartial_fromObject(e,t,r,o){var n=o.m,i=o.d,l=o.types,a=o.ksi,s=void 0!==a;if(e.resolvedType)if(e.resolvedType instanceof Enum){for(var u=s?i[r][a]:i[r],f=e.resolvedType.values,c=Object.keys(f),g=0;g<c.length;g++)if(!(e.repeated&&f[c[g]]===e.typeDefault||c[g]!=u&&f[c[g]]!=u)){s?n[r][a]=f[c[g]]:n[r]=f[c[g]];break}}else{if("object"!==_typeof(s?i[r][a]:i[r]))throw TypeError(e.fullName+": object expected");s?n[r][a]=l[t].fromObject(i[r][a]):n[r]=l[t].fromObject(i[r])}else{var y=!1;switch(e.type){case"double":case"float":s?n[r][a]=Number(i[r][a]):n[r]=Number(i[r]);break;case"uint32":case"fixed32":s?n[r][a]=i[r][a]>>>0:n[r]=i[r]>>>0;break;case"int32":case"sint32":case"sfixed32":s?n[r][a]=0|i[r][a]:n[r]=0|i[r];break;case"uint64":y=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":util.Long?s?n[r][a]=util.Long.fromValue(i[r][a]).unsigned=y:n[r]=util.Long.fromValue(i[r]).unsigned=y:"string"==typeof(s?i[r][a]:i[r])?s?n[r][a]=parseInt(i[r][a],10):n[r]=parseInt(i[r],10):"number"==typeof(s?i[r][a]:i[r])?s?n[r][a]=i[r][a]:n[r]=i[r]:"object"===_typeof(s?i[r][a]:i[r])&&(s?n[r][a]=new util.LongBits(i[r][a].low>>>0,i[r][a].high>>>0).toNumber(y):n[r]=new util.LongBits(i[r].low>>>0,i[r].high>>>0).toNumber(y));break;case"bytes":"string"==typeof(s?i[r][a]:i[r])?s?util.base64.decode(i[r][a],n[r][a]=util.newBuffer(util.base64.length(i[r][a])),0):util.base64.decode(i[r],n[r]=util.newBuffer(util.base64.length(i[r])),0):(s?i[r][a]:i[r]).length&&(s?n[r][a]=i[r][a]:n[r]=i[r]);break;case"string":s?n[r][a]=String(i[r][a]):n[r]=String(i[r]);break;case"bool":s?n[r][a]=Boolean(i[r][a]):n[r]=Boolean(i[r])}}}function valuePartial_toObject(e,t,r,o){var n=o.m,i=o.d,l=o.types,a=o.ksi,s=o.o,u=void 0!==a;if(e.resolvedType)e.resolvedType instanceof Enum?u?i[r][a]=s.enums===String?l[t].values[n[r][a]]:n[r][a]:i[r]=s.enums===String?l[t].values[n[r]]:n[r]:u?i[r][a]=l[t].toObject(n[r][a],s):i[r]=l[t].toObject(n[r],s);else{var f=!1;switch(e.type){case"double":case"float":u?i[r][a]=s.json&&!isFinite(n[r][a])?String(n[r][a]):n[r][a]:i[r]=s.json&&!isFinite(n[r])?String(n[r]):n[r];break;case"uint64":f=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":"number"==typeof n[r][a]?u?i[r][a]=s.longs===String?String(n[r][a]):n[r][a]:i[r]=s.longs===String?String(n[r]):n[r]:u?i[r][a]=s.longs===String?util.Long.prototype.toString.call(n[r][a]):s.longs===Number?new util.LongBits(n[r][a].low>>>0,n[r][a].high>>>0).toNumber(f):n[r][a]:i[r]=s.longs===String?util.Long.prototype.toString.call(n[r]):s.longs===Number?new util.LongBits(n[r].low>>>0,n[r].high>>>0).toNumber(f):n[r];break;case"bytes":u?i[r][a]=s.bytes===String?util.base64.encode(n[r][a],0,n[r][a].length):s.bytes===Array?Array.prototype.slice.call(n[r][a]):n[r][a]:i[r]=s.bytes===String?util.base64.encode(n[r],0,n[r].length):s.bytes===Array?Array.prototype.slice.call(n[r]):n[r];break;default:u?i[r][a]=n[r][a]:i[r]=n[r]}}}converter._configure=function(){Enum=require("./enum"),util=require("./util")},converter.fromObject=function(e){var s=e.fieldsArray;return function(a){return function(e){if(e instanceof this.ctor)return e;if(!s.length)return new this.ctor;for(var t=new this.ctor,r=0;r<s.length;++r){var o=s[r].resolve(),n=o.name;if(o.map){if(e[n]){if("object"!==_typeof(e[n]))throw TypeError(o.fullName+": object expected");t[n]={}}for(var i=Object.keys(e[n]),l=0;l<i.length;++l)valuePartial_fromObject(o,r,n,util.merge(util.copy(a),{m:t,d:e,ksi:i[l]}))}else if(o.repeated){if(e[n]){if(!Array.isArray(e[n]))throw TypeError(o.fullName+": array expected");for(t[n]=[],l=0;l<e[n].length;++l)valuePartial_fromObject(o,r,n,util.merge(util.copy(a),{m:t,d:e,ksi:l}))}}else(o.resolvedType instanceof Enum||null!=e[n])&&valuePartial_fromObject(o,r,n,util.merge(util.copy(a),{m:t,d:e}))}return t}}},converter.toObject=function(p){var b=p.fieldsArray.slice().sort(util.compareFieldsById);return function(y){return b.length?function(e,t){t=t||{};for(var r={},o=[],n=[],i=[],l=0;l<b.length;++l)b[l].partOf||(b[l].resolve().repeated?o:b[l].map?n:i).push(b[l]);if(o.length&&(t.arrays||t.defaults))for(l=0;l<o.length;++l)r[o[l].name]=[];if(n.length&&(t.objects||t.defaults))for(l=0;l<n.length;++l)r[n[l].name]={};if(i.length&&t.defaults)for(l=0;l<i.length;++l){var a,s,u=(s=i[l]).name;s.resolvedType instanceof Enum?r[u]=t.enums=String?s.resolvedType.valuesById[s.typeDefault]:s.typeDefault:s.long?util.Long?(a=new util.Long(s.typeDefault.low,s.typeDefault.high,s.typeDefault.unsigned),r[u]=t.longs===String?a.toString():t.longs===Number?a.toNumber():a):r[u]=t.longs===String?s.typeDefault.toString():s.typeDefault.toNumber():s.bytes?r[u]=t.bytes===String?String.fromCharCode.apply(String,s.typeDefault):Array.prototype.slice.call(s.typeDefault).join("*..*").split("*..*"):r[u]=s.typeDefault}for(l=0;l<b.length;++l){u=(s=b[l]).name;var f,c,g=p._fieldsArray.indexOf(s);if(s.map){if(e[u]&&(f=Object.keys(e[u]).length))for(r[u]={},c=0;c<f.length;++c)valuePartial_toObject(s,g,u,util.merge(util.copy(y),{m:e,d:r,ksi:f[c],o:t}))}else if(s.repeated){if(e[u]&&e[u].length)for(r[u]=[],c=0;c<e[u].length;++c)valuePartial_toObject(s,g,u,util.merge(util.copy(y),{m:e,d:r,ksi:c,o:t}))}else null!=e[u]&&e.hasOwnProperty(u)&&valuePartial_toObject(s,g,u,util.merge(util.copy(y),{m:e,d:r,o:t})),s.partOf&&t.oneofs&&(r[s.partOf.name]=u)}return r}:function(){return{}}}};