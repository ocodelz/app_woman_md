"use strict";var Enum,types;function encoder(v){return function(e){var f=e.Writer,c=e.types,m=e.util;return function(e,n){n=n||f.create();for(var i=v.fieldsArray.slice().sort(m.compareFieldsById),r=0;r<i.length;r++){var t=i[r],o=v._fieldsArray.indexOf(t),d=t.resolvedType instanceof Enum?"uint32":t.type,l=types.basic[d],u=e[t.name];if(t.resolvedType instanceof Enum&&"string"==typeof u&&(u=c[o].values[u]),t.map){if(null!=u&&e.hasOwnProperty(t.name))for(var a=Object.keys(u),p=0;p<a.length;++p)n.uint32((t.id<<3|2)>>>0).fork().uint32(8|types.mapKey[t.keyType])[t.keyType](a[p]),void 0===l?c[o].encode(u[a[p]],n.uint32(18).fork()).ldelim().ldelim():n.uint32(16|l)[d](u[a[p]]).ldelim()}else if(t.repeated){if(u&&u.length)if(t.packed&&void 0!==types.packed[d]){n.uint32((t.id<<3|2)>>>0).fork();for(var s=0;s<u.length;s++)n[d](u[s]);n.ldelim()}else for(var y=0;y<u.length;y++)void 0===l?t.resolvedType.group?c[o].encode(u[y],n.uint32((t.id<<3|3)>>>0)).uint32((t.id<<3|4)>>>0):c[o].encode(u[y],n.uint32((t.id<<3|2)>>>0).fork()).ldelim():n.uint32((t.id<<3|l)>>>0)[d](u[y])}else(!t.optional||null!=u&&e.hasOwnProperty(t.name))&&(t.optional||null!=u&&e.hasOwnProperty(t.name)||console.warn("注意啦!!!很大概率会报错 类型:",e.$type?e.$type.name:"不晓得","没有设置对应的属性:",t.name,"检查是不是proto文件属性设置为了required"),void 0===l?t.resolvedType.group?c[o].encode(u,n.uint32((t.id<<3|3)>>>0)).uint32((t.id<<3|4)>>>0):c[o].encode(u,n.uint32((t.id<<3|2)>>>0).fork()).ldelim():n.uint32((t.id<<3|l)>>>0)[d](u))}return n}}}(module.exports=encoder)._configure=function(){Enum=require("./enum"),types=require("./types")};